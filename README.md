# Домашнее задание 1 конфигурационное управление
## Вариант 31
### Задание 1
Разработать эмулятор для языка оболочки ОС. Необходимо сделать работу 
эмулятора как можно более похожей на сеанс shell в UNIX-подобной ОС. 
Эмулятор должен запускаться из реальной командной строки, а файл с 
виртуальной файловой системой не нужно распаковывать у пользователя. 
Эмулятор принимает образ виртуальной файловой системы в виде файла формата 
zip. Эмулятор должен работать в режиме CLI. 
Конфигурационный файл имеет формат xml и содержит:

- Имя компьютера для показа в приглашении к вводу. 
- Путь к архиву виртуальной файловой системы. 
Необходимо поддержать в эмуляторе команды ls, cd и exit, а также 
следующие команды: 
1. chmod. 
2. cal. 
3. tac.

Все функции эмулятора должны быть покрыты тестами, а для каждой из 
поддерживаемых команд необходимо написать 2 теста.
### Общее описание
Эта программа реализует эмулятор командной оболочки, который работает с ZIP-архивом и поддерживает базовые команды UNIX-подобной системы. Программа предоставляет следующие команды:

- ls: выводит список файлов и папок в текущей директории.
- exit: завершает работу программы.
- tac <file>: отображает содержимое указанного файла в обратном порядке.
- cal: выводит календарь для текущего месяца.
- cd <directory>: меняет текущую директорию.
- chmod <mode> <file>: симулирует изменение прав доступа к файлу.

Программа работает с содержимым архива doc1.zip, используя модуль `zipfile` для чтения файлов, а модуль `os` — для обработки путей и навигации по директориям.
### Описание функции run_shell
Функция `run_shell` реализует цикл командной оболочки, которая поддерживает команды `ls`, `exit`, `tac`, `cal`, `cd`, и `chmod`. Она принимает команды пользователя в виде строкового ввода, определяет команду и её аргументы, а затем выполняет соответствующее действие:

- `ls` — выводит список файлов в текущей директории архива.
- `exit` — завершает работу оболочки.
- `tac` — отображает содержимое файла в обратном порядке.
- `cal` — выводит календарь текущего месяца.
- `cd` — изменяет текущую директорию.
- `chmod` — симулирует изменение прав доступа к файлу (без фактического изменения).

Основной цикл завершится только при вводе команды `exit`.
### Описание функции list_files
Функция `list_files` выводит список файлов и папок, находящихся в текущей директории внутри ZIP-архива.

1. Удаляет ведущий слеш / из пути текущей директории для корректной обработки.
2. Проходит по каждому элементу архива.
3. Проверяет, находится ли элемент в текущей директории.
4. Если элемент не содержит поддиректорий, выводит его имя, имитируя команду `ls`.
### Описание функции tac_file
Функция `tac_file` выводит содержимое указанного файла в архиве в обратном порядке, имитируя поведение команды `tac`.

1. Пытается прочитать содержимое файла `file_path` из архива `myzip`, разбивая его на строки.
2. Если файл найден, выводит строки в обратном порядке.
3. В случае отсутствия файла выводит сообщение об ошибке.

### Описание функции change_directory
Функция `change_directory` изменяет текущую директорию в эмуляторе оболочки.

1. Если аргумент `new_dir` равен `".."`, возвращается родительская директория.
2. Иначе строится путь к новой директории на основе текущей.
3. Проверяется, существует ли эта директория в архиве `myzip`.
4. Если директория существует, функция возвращает её нормализованный путь; если нет — выводит сообщение об ошибке и остаётся в текущей директории.

### Описание функции chmod_file
Функция `chmod_file` симулирует изменение прав доступа к файлу, имитируя поведение команды `chmod`.

1. Принимает параметры `mode` (новые права доступа) и `file_name` (имя файла).
2. Выводит сообщение о предполагаемом изменении прав доступа, но фактически не изменяет их.

### Описание функции main
Этот блок проверяет, запущен ли скрипт напрямую (а не импортирован как модуль). Если да, он вызывает функцию `run_shell()` для запуска эмулятора командной оболочки.

### Тест
![Тест](https://raw.githubusercontent.com/juliyurkova/conf_man/refs/heads/master/capture_20241101153455312.bmp)
